
# Calculator Service

Простой HTTP-сервис для вычисления математических выражений. Сервис парсит и вычисляет выражения, поддерживает основные арифметические операции (`+`, `-`, `*`, `/`) с учётом приоритета операций и скобок.

---

## Возможности
- Парсинг и вычисление арифметических выражений (например, `2+2*2`, `(10-3)*4/2`).
- Поддержка скобок для правильного порядка выполнения операций.
- Возврат понятных ошибок для некорректных выражений.
- Удобный интерфейс на основе JSON.

---

## Как запустить проект

Сервис написан на Go и легко запускается с помощью стандартных инструментов Go.

1. Убедитесь, что у вас установлен Go (версии 1.19 или выше).
2. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/kupetss/calc_service.git
   cd calc_service
   ```
3. Запустите сервер:
   ```bash
   go run ./cmd/main.go
   ```
4. Сервис будет доступен по адресу:  
   `http://localhost:8080`

---

## Как пользоваться

Сервис предоставляет один API-эндпоинт:  
`POST /api/v1/calculate`

### Формат запроса:
Тело запроса должно быть в формате JSON следующей структуры:
```json
{
  "expression": "ваше_математическое_выражение"
}
```

### Формат ответа:
Ответ будет в формате JSON и содержать одно из следующих полей:
- **`result`**: Результат вычисления (строка).
- **`error`**: Описание ошибки.

---

## Примеры использования

### 1. Успешное вычисление
**Запрос:**
```bash
curl --location 'http://localhost:8080/api/v1/calculate' \
--header 'Content-Type: application/json' \
--data '{
  "expression": "2+2*2"
}'
```

**Ответ:**
```json
{
  "result": "6.00"
}
```

---

### 2. Ошибка 422: Неправильное выражение
**Запрос:**
```bash
curl --location 'http://localhost:8080/api/v1/calculate' \
--header 'Content-Type: application/json' \
--data '{
  "expression": "2++2"
}'
```

**Ответ:**
```json
{
  "error": "Expression is not valid"
}
```

---

### 3. Ошибка 500: Проблема на сервере
**Запрос:**
```bash
curl --location 'http://localhost:8080/api/v1/calculate' \
--header 'Content-Type: application/json' \
--data '{
  "expression": ""
}'
```

**Ответ:**
```json
{
  "error": "Internal server error"
}
```

---

## Тестирование

Для проверки работы сервиса вы можете использовать команды `curl` (см. раздел "Примеры использования"). Также доступны модульные тесты:

1. Запустите тесты:
   ```bash
   go test ./internal/...
   ```
